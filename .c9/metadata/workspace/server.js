{"filter":false,"title":"server.js","tooltip":"/server.js","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "],"id":2},{"start":{"row":27,"column":0},"end":{"row":27,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":28,"column":0},"end":{"row":28,"column":6},"action":"remove","lines":["      "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"remove","lines":["    "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"remove","lines":["    "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["    "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":34,"column":0},"end":{"row":34,"column":6},"action":"remove","lines":["      "]},{"start":{"row":34,"column":0},"end":{"row":34,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":35,"column":0},"end":{"row":35,"column":6},"action":"remove","lines":["      "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"remove","lines":["    "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"remove","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":39,"column":0},"end":{"row":39,"column":6},"action":"remove","lines":["      "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":41,"column":0},"end":{"row":41,"column":6},"action":"remove","lines":["      "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":42,"column":0},"end":{"row":42,"column":8},"action":"remove","lines":["        "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":44,"column":0},"end":{"row":44,"column":6},"action":"remove","lines":["      "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":45,"column":0},"end":{"row":45,"column":8},"action":"remove","lines":["        "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":46,"column":0},"end":{"row":46,"column":10},"action":"remove","lines":["          "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":5},"action":"insert","lines":["\t\t\t\t\t"]},{"start":{"row":47,"column":0},"end":{"row":47,"column":10},"action":"remove","lines":["          "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":5},"action":"insert","lines":["\t\t\t\t\t"]},{"start":{"row":48,"column":0},"end":{"row":48,"column":8},"action":"remove","lines":["        "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":50,"column":0},"end":{"row":50,"column":8},"action":"remove","lines":["        "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":51,"column":0},"end":{"row":51,"column":8},"action":"remove","lines":["        "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":52,"column":0},"end":{"row":52,"column":6},"action":"remove","lines":["      "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"remove","lines":["    "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"remove","lines":["    "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":56,"column":0},"end":{"row":56,"column":6},"action":"remove","lines":["      "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":57,"column":0},"end":{"row":57,"column":8},"action":"remove","lines":["        "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":58,"column":0},"end":{"row":58,"column":6},"action":"remove","lines":["      "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"remove","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"remove","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":63,"column":0},"end":{"row":63,"column":2},"action":"remove","lines":["  "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"remove","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":65,"column":0},"end":{"row":65,"column":4},"action":"remove","lines":["    "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":66,"column":0},"end":{"row":66,"column":6},"action":"remove","lines":["      "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":67,"column":0},"end":{"row":67,"column":4},"action":"remove","lines":["    "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":68,"column":0},"end":{"row":68,"column":4},"action":"remove","lines":["    "]},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":69,"column":0},"end":{"row":69,"column":6},"action":"remove","lines":["      "]},{"start":{"row":69,"column":0},"end":{"row":69,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":70,"column":0},"end":{"row":70,"column":4},"action":"remove","lines":["    "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":71,"column":0},"end":{"row":71,"column":2},"action":"remove","lines":["  "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["  "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":76,"column":0},"end":{"row":76,"column":4},"action":"remove","lines":["    "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"remove","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"remove","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":27,"column":0},"end":{"row":27,"column":2},"action":"remove","lines":["\t\t"],"id":3},{"start":{"row":27,"column":0},"end":{"row":27,"column":8},"action":"insert","lines":["        "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":28,"column":0},"end":{"row":28,"column":12},"action":"insert","lines":["            "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":29,"column":0},"end":{"row":29,"column":8},"action":"insert","lines":["        "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":31,"column":0},"end":{"row":31,"column":8},"action":"insert","lines":["        "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":33,"column":0},"end":{"row":33,"column":8},"action":"insert","lines":["        "]},{"start":{"row":34,"column":0},"end":{"row":34,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":34,"column":0},"end":{"row":34,"column":12},"action":"insert","lines":["            "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":35,"column":0},"end":{"row":35,"column":12},"action":"insert","lines":["            "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":36,"column":0},"end":{"row":36,"column":8},"action":"insert","lines":["        "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":38,"column":0},"end":{"row":38,"column":8},"action":"insert","lines":["        "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":39,"column":0},"end":{"row":39,"column":12},"action":"insert","lines":["            "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":41,"column":0},"end":{"row":41,"column":12},"action":"insert","lines":["            "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":42,"column":0},"end":{"row":42,"column":16},"action":"insert","lines":["                "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":44,"column":0},"end":{"row":44,"column":12},"action":"insert","lines":["            "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":45,"column":0},"end":{"row":45,"column":16},"action":"insert","lines":["                "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":5},"action":"remove","lines":["\t\t\t\t\t"]},{"start":{"row":46,"column":0},"end":{"row":46,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":5},"action":"remove","lines":["\t\t\t\t\t"]},{"start":{"row":47,"column":0},"end":{"row":47,"column":20},"action":"insert","lines":["                    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":48,"column":0},"end":{"row":48,"column":16},"action":"insert","lines":["                "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":50,"column":0},"end":{"row":50,"column":16},"action":"insert","lines":["                "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":51,"column":0},"end":{"row":51,"column":16},"action":"insert","lines":["                "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":52,"column":0},"end":{"row":52,"column":12},"action":"insert","lines":["            "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":53,"column":0},"end":{"row":53,"column":8},"action":"insert","lines":["        "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":55,"column":0},"end":{"row":55,"column":8},"action":"insert","lines":["        "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":56,"column":0},"end":{"row":56,"column":12},"action":"insert","lines":["            "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":57,"column":0},"end":{"row":57,"column":16},"action":"insert","lines":["                "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":58,"column":0},"end":{"row":58,"column":12},"action":"insert","lines":["            "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":59,"column":0},"end":{"row":59,"column":8},"action":"insert","lines":["        "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":64,"column":0},"end":{"row":64,"column":8},"action":"insert","lines":["        "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":65,"column":0},"end":{"row":65,"column":8},"action":"insert","lines":["        "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":66,"column":0},"end":{"row":66,"column":12},"action":"insert","lines":["            "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":67,"column":0},"end":{"row":67,"column":8},"action":"insert","lines":["        "]},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":68,"column":0},"end":{"row":68,"column":8},"action":"insert","lines":["        "]},{"start":{"row":69,"column":0},"end":{"row":69,"column":3},"action":"remove","lines":["\t\t\t"]},{"start":{"row":69,"column":0},"end":{"row":69,"column":12},"action":"insert","lines":["            "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":70,"column":0},"end":{"row":70,"column":8},"action":"insert","lines":["        "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"insert","lines":["    "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":75,"column":0},"end":{"row":75,"column":4},"action":"insert","lines":["    "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["\t\t"]},{"start":{"row":76,"column":0},"end":{"row":76,"column":8},"action":"insert","lines":["        "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":77,"column":0},"end":{"row":77,"column":4},"action":"insert","lines":["    "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["    "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":82,"column":0},"end":{"row":82,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":80,"column":79},"end":{"row":80,"column":80},"action":"insert","lines":[" "],"id":4}],[{"start":{"row":82,"column":17},"end":{"row":82,"column":23},"action":"remove","lines":["Chat s"],"id":5},{"start":{"row":82,"column":17},"end":{"row":82,"column":18},"action":"insert","lines":["S"]}],[{"start":{"row":25,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["","io.on('connection', function (socket) {","        messages.forEach(function (data) {","            socket.emit('message', data);","        });","","        sockets.push(socket);","","        socket.on('disconnect', function () {","            sockets.splice(sockets.indexOf(socket), 1);","            updateRoster();","        });","","        socket.on('message', function (msg) {","            var text = String(msg || '');","","            if (!text)","                return;","","            socket.get('name', function (err, name) {","                var data = {","                    name: name,","                    text: text","                };","","                broadcast('message', data);","                messages.push(data);","            });","        });","","        socket.on('identify', function (name) {","            socket.set('name', String(name || 'Anonymous'), function (err) {","                updateRoster();","            });","        });","    });","","function updateRoster() {","    async.map(","        sockets,","        function (socket, callback) {","            socket.get('name', callback);","        },","        function (err, names) {","            broadcast('roster', names);","        }","    );","}","","function broadcast(event, data) {","    sockets.forEach(function (socket) {","        socket.emit(event, data);","    });","}"],"id":6}],[{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"remove","lines":["",""],"id":7}],[{"start":{"row":23,"column":0},"end":{"row":24,"column":17},"action":"remove","lines":["var messages = [];","var sockets = [];"],"id":8}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":33},"action":"remove","lines":["var io = socketio.listen(server);"],"id":9}],[{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["",""],"id":10}],[{"start":{"row":22,"column":0},"end":{"row":23,"column":0},"action":"remove","lines":["",""],"id":11}],[{"start":{"row":8,"column":29},"end":{"row":9,"column":36},"action":"remove","lines":["","var socketio = require('socket.io');"],"id":12}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":0},"end":{"row":7,"column":0},"isBackwards":false},"options":{"tabSize":4,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1491195575107,"hash":"e58bdc0e4d91b5bbfaf41c3f113e9debe51cad36"}